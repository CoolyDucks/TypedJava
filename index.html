<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>WikiJava Example</title>
<style>
body { font-family: sans-serif; padding:20px; background:#f9f9f9; }
pre { background:#eee; padding:10px; border-radius:5px; }
#output { border:1px solid #ccc; padding:10px; margin-top:10px; background:#fff; }
button { margin-top:10px; padding:5px 10px; }
</style>
</head>
<body>

<h2>WikiJava Example</h2>
<p>Simple Java example displayed on WikiJava:</p>

<pre id="codeArea">
int a = 5;
int b = 10;
System.out.println("Sum: " + (a+b));
</pre>

<div id="output"></div>
<button id="runBtn">Run Example</button>

<script type="module">
class TypedJava {
    constructor(codeElId, outputElId) {
        this.codeEl = document.getElementById(codeElId);
        this.outputEl = document.getElementById(outputElId);
        this.variables = {};
    }

    run() {
        this.outputEl.innerHTML = '';
        const lines = this.codeEl.textContent.split('\n');
        for (let line of lines) this.execLine(line.trim());
    }

    execLine(line) {
        if (!line) return;
        if (line.startsWith('System.out.println(') && line.endsWith(');')) {
            const content = line.slice(19,-2);
            let result = content;
            try { 
                result = eval(content.replace(/\b(\w+)\b/g, v => this.variables[v]!==undefined ? this.variables[v] : v));
            } catch(e){}
            this.log(result);
            return;
        }
        let match = line.match(/(int|double|String)\s+(\w+)\s*=\s*(.+);/);
        if (match) {
            const [, type, name, value] = match;
            this.variables[name] = type==="int" ? parseInt(value) : type==="double" ? parseFloat(value) : value.replace(/^"|"$/g,'');
        }
    }

    log(msg) {
        const p = document.createElement('p');
        p.textContent = msg;
        this.outputEl.appendChild(p);
    }
}

const app = new TypedJava('codeArea','output');
document.getElementById('runBtn').onclick = () => app.run();
</script>

</body>
</html>
